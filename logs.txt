2025-08-01 16:19:27,071 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/saswatpandey/hydroleaf/env/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-01 16:19:27,357 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 328.6ms
2025-08-01 16:19:27,358 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:19:27,720 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 251.6ms
2025-08-01 16:19:27,720 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:19:28,076 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 248.1ms
2025-08-01 16:19:28,076 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:19:28,090 - app.main - WARNING - HTTPException Email already registered on /api/v1/auth/signup
2025-08-01 16:19:28,091 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 400 • 13.7ms
2025-08-01 16:19:28,091 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 400 Bad Request"
2025-08-01 16:19:28,168 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 0.8ms
2025-08-01 16:19:28,168 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:19:28,222 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.5ms
2025-08-01 16:19:28,222 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:19:28,277 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.2ms
2025-08-01 16:19:28,278 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:19:28,598 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 266.7ms
2025-08-01 16:19:28,598 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:19:28,831 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 200 • 232.4ms
2025-08-01 16:19:28,832 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-08-01 16:19:29,157 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 247.9ms
2025-08-01 16:19:29,157 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:19:29,388 - app.main - WARNING - HTTPException Invalid credentials on /api/v1/auth/login
2025-08-01 16:19:29,388 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 401 • 230.5ms
2025-08-01 16:19:29,388 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-08-01 16:19:29,480 - app.main - WARNING - HTTPException Invalid credentials on /api/v1/auth/login
2025-08-01 16:19:29,480 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 401 • 11.2ms
2025-08-01 16:19:29,480 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-08-01 16:19:29,540 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 422 • 2.1ms
2025-08-01 16:19:29,540 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:19:29,852 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 259.5ms
2025-08-01 16:19:29,852 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:19:30,335 - app.services.supply_chain_service - ERROR - No valid JSON block found in LLM response.
2025-08-01 16:19:30,800 - app.services.llm - INFO - Sending prompt to LLM:

2025-08-01 16:19:30,800 - app.services.llm - INFO - Ollama → deepseek-r1:1.5b prompt:

2025-08-01 16:19:32,221 - app.services.dose_manager - INFO - Cancellation response for device devX: {'cancelled': True}
2025-08-01 16:19:32,860 - app.services.llm - ERROR - No valid JSON block found in OpenAI response: no braces at all
2025-08-01 16:19:34,318 - httpx - INFO - HTTP Request: GET https://google.serper.dev/search?q=optimal+growth.+Focus+on+best+practices+in+Europe+for+Veggie+cultivation.&gl=in&hl=en&apiKey=eeaeee2729768c737ca5a6004968a9840677e523&num=5&full=true&output=detailed "HTTP/1.1 200 OK"
2025-08-01 16:19:34,613 - httpx - INFO - HTTP Request: GET https://www.researchgate.net/publication/323363546_Strategies_for_optimal_fertiliser_management_of_vegetable_crops_in_Europe "HTTP/1.1 403 Forbidden"
2025-08-01 16:19:34,617 - app.services.serper - WARNING - Scrape forbidden (403) for https://www.researchgate.net/publication/323363546_Strategies_for_optimal_fertiliser_management_of_vegetable_crops_in_Europe
2025-08-01 16:19:34,635 - httpx - INFO - HTTP Request: GET https://www.researchgate.net/publication/260984593_Good_Agricultural_Practices_for_greenhouse_vegetable_crops_Principles_for_Mediterranean_climate_areas "HTTP/1.1 403 Forbidden"
2025-08-01 16:19:34,636 - app.services.serper - WARNING - Scrape forbidden (403) for https://www.researchgate.net/publication/260984593_Good_Agricultural_Practices_for_greenhouse_vegetable_crops_Principles_for_Mediterranean_climate_areas
2025-08-01 16:19:35,020 - httpx - INFO - HTTP Request: GET https://www.fao.org/4/i3284e/i3284e.pdf "HTTP/1.1 200 OK"
2025-08-01 16:19:35,581 - httpx - INFO - HTTP Request: GET https://www.agronomyjournals.com/article/view/2394/8-1-44 "HTTP/1.1 302 Moved Temporarily"
2025-08-01 16:19:35,583 - app.services.serper - WARNING - HTTP error scraping https://www.agronomyjournals.com/article/view/2394/8-1-44: Redirect response '302 Moved Temporarily' for url 'https://www.agronomyjournals.com/article/view/2394/8-1-44'
Redirect location: 'https://www.agronomyjournals.com/archives/2025/vol8issue1/PartD/8-1-44-621.pdf'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302
2025-08-01 16:19:35,669 - httpx - INFO - HTTP Request: GET https://www.frontiersin.org/journals/plant-science/articles/10.3389/fpls.2024.1357153/full "HTTP/1.1 200 OK"
2025-08-01 16:19:36,560 - httpx - INFO - HTTP Request: GET http://localhost:11434/api/tags "HTTP/1.1 200 OK"
2025-08-01 16:19:36,561 - app.services.llm - INFO - Ollama → deepseek-r1:1.5b prompt:
Return exactly this JSON: {"foo": 42}
2025-08-01 16:19:36,651 - httpx - INFO - HTTP Request: GET http://localhost:11434/api/tags "HTTP/1.1 200 OK"
2025-08-01 16:19:36,651 - app.services.llm - INFO - Sending prompt to LLM:
Return {"x":1}
2025-08-01 16:19:36,651 - app.services.llm - INFO - Ollama → deepseek-r1:1.5b prompt:
Return {"x":1}
2025-08-01 16:19:37,301 - app.services.plant_service - INFO - Fetching plants from database...
2025-08-01 16:19:37,302 - app.services.plant_service - INFO - No plants found, returning an empty list.
2025-08-01 16:19:37,374 - app.services.plant_service - INFO - Fetching plants from database...
2025-08-01 16:19:37,374 - app.services.plant_service - INFO - Fetched 2 plants from the database
2025-08-01 16:19:37,691 - app.services.plant_service - INFO - Fetching plants from database...
2025-08-01 16:19:37,691 - app.services.plant_service - ERROR - Database query failed: db is down
2025-08-01 16:19:37,781 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 0.8ms
2025-08-01 16:19:37,781 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:19:37,847 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.0ms
2025-08-01 16:19:37,847 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:19:37,907 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.0ms
2025-08-01 16:19:37,907 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:19:37,971 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.4ms
2025-08-01 16:19:37,971 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:19:38,036 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.4ms
2025-08-01 16:19:38,037 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:19:38,102 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.4ms
2025-08-01 16:19:38,103 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:19:38,563 - app.main - INFO - POST /admin/device/dev-2/issue-token • ip=127.0.0.1 • device_id=- • 404 • 0.2ms
2025-08-01 16:19:38,563 - httpx - INFO - HTTP Request: POST http://test/admin/device/dev-2/issue-token "HTTP/1.1 404 Not Found"
2025-08-01 16:35:01,340 - uvicorn.error - INFO - Shutting down
2025-08-01 16:35:01,452 - uvicorn.error - INFO - Waiting for application shutdown.
2025-08-01 16:35:01,455 - uvicorn.error - INFO - Application shutdown complete.
2025-08-01 16:35:01,456 - uvicorn.error - INFO - Finished server process [66164]
2025-08-01 16:40:30,446 - uvicorn.error - INFO - Started server process [71513]
2025-08-01 16:40:30,446 - uvicorn.error - INFO - Waiting for application startup.
2025-08-01 16:40:30,446 - uvicorn.error - INFO - Application startup complete.
2025-08-01 16:40:30,448 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-08-01 16:40:40,667 - uvicorn.error - INFO - Shutting down
2025-08-01 16:40:40,771 - uvicorn.error - INFO - Waiting for application shutdown.
2025-08-01 16:40:40,774 - uvicorn.error - INFO - Application shutdown complete.
2025-08-01 16:40:40,774 - uvicorn.error - INFO - Finished server process [71513]
2025-08-01 16:40:45,839 - uvicorn.error - INFO - Started server process [71662]
2025-08-01 16:40:45,839 - uvicorn.error - INFO - Waiting for application startup.
2025-08-01 16:40:45,840 - uvicorn.error - INFO - Application startup complete.
2025-08-01 16:40:45,840 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-08-01 16:41:20,193 - app.main - INFO - GET /api/v1/docs • ip=127.0.0.1 • device_id=- • 200 • 7.9ms
2025-08-01 16:41:20,759 - app.main - INFO - GET /api/v1/docs • ip=127.0.0.1 • device_id=- • 200 • 0.4ms
2025-08-01 16:41:21,051 - app.main - INFO - GET /api/v1/openapi.json • ip=127.0.0.1 • device_id=- • 200 • 31.6ms
2025-08-01 16:41:51,706 - uvicorn.error - INFO - Shutting down
2025-08-01 16:41:51,820 - uvicorn.error - INFO - Waiting for application shutdown.
2025-08-01 16:41:51,824 - uvicorn.error - INFO - Application shutdown complete.
2025-08-01 16:41:51,825 - uvicorn.error - INFO - Finished server process [71662]
2025-08-01 16:44:30,443 - uvicorn.error - INFO - Started server process [72090]
2025-08-01 16:44:30,444 - uvicorn.error - INFO - Waiting for application startup.
2025-08-01 16:44:30,444 - uvicorn.error - INFO - Application startup complete.
2025-08-01 16:44:30,445 - uvicorn.error - INFO - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-08-01 16:47:28,798 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/saswatpandey/hydroleaf/env/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-01 16:47:29,069 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 312.4ms
2025-08-01 16:47:29,069 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:47:29,504 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 266.3ms
2025-08-01 16:47:29,505 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:47:29,879 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 251.9ms
2025-08-01 16:47:29,880 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:47:29,897 - app.main - WARNING - HTTPException Email already registered on /api/v1/auth/signup
2025-08-01 16:47:29,897 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 400 • 16.8ms
2025-08-01 16:47:29,897 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 400 Bad Request"
2025-08-01 16:47:29,981 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.3ms
2025-08-01 16:47:29,982 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:47:30,037 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.5ms
2025-08-01 16:47:30,037 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:47:30,091 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.7ms
2025-08-01 16:47:30,092 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:47:30,431 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 271.0ms
2025-08-01 16:47:30,431 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:47:30,668 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 200 • 235.7ms
2025-08-01 16:47:30,668 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-08-01 16:47:31,020 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 255.7ms
2025-08-01 16:47:31,021 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:47:31,254 - app.main - WARNING - HTTPException Invalid credentials on /api/v1/auth/login
2025-08-01 16:47:31,254 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 401 • 232.6ms
2025-08-01 16:47:31,254 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-08-01 16:47:31,346 - app.main - WARNING - HTTPException Invalid credentials on /api/v1/auth/login
2025-08-01 16:47:31,346 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 401 • 11.3ms
2025-08-01 16:47:31,346 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-08-01 16:47:31,407 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 422 • 2.2ms
2025-08-01 16:47:31,407 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:47:31,766 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 243.7ms
2025-08-01 16:47:31,767 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:47:32,259 - app.services.supply_chain_service - ERROR - No valid JSON block found in LLM response.
2025-08-01 16:47:32,739 - app.services.llm - INFO - Sending prompt to LLM:

2025-08-01 16:47:32,739 - app.services.llm - INFO - Ollama → deepseek-r1:1.5b prompt:

2025-08-01 16:47:34,023 - app.services.dose_manager - INFO - Cancellation response for device devX: {'cancelled': True}
2025-08-01 16:47:34,683 - app.services.llm - ERROR - No valid JSON block found in OpenAI response: no braces at all
2025-08-01 16:47:36,977 - httpx - INFO - HTTP Request: GET https://google.serper.dev/search?q=optimal+growth.+Focus+on+best+practices+in+Europe+for+Veggie+cultivation.&gl=in&hl=en&apiKey=eeaeee2729768c737ca5a6004968a9840677e523&num=5&full=true&output=detailed "HTTP/1.1 200 OK"
2025-08-01 16:47:37,365 - httpx - INFO - HTTP Request: GET https://www.researchgate.net/publication/260984593_Good_Agricultural_Practices_for_greenhouse_vegetable_crops_Principles_for_Mediterranean_climate_areas "HTTP/1.1 403 Forbidden"
2025-08-01 16:47:37,369 - httpx - INFO - HTTP Request: GET https://www.researchgate.net/publication/323363546_Strategies_for_optimal_fertiliser_management_of_vegetable_crops_in_Europe "HTTP/1.1 403 Forbidden"
2025-08-01 16:47:37,370 - app.services.serper - WARNING - Scrape forbidden (403) for https://www.researchgate.net/publication/260984593_Good_Agricultural_Practices_for_greenhouse_vegetable_crops_Principles_for_Mediterranean_climate_areas
2025-08-01 16:47:37,372 - app.services.serper - WARNING - Scrape forbidden (403) for https://www.researchgate.net/publication/323363546_Strategies_for_optimal_fertiliser_management_of_vegetable_crops_in_Europe
2025-08-01 16:47:37,899 - httpx - INFO - HTTP Request: GET https://www.fao.org/4/i3284e/i3284e.pdf "HTTP/1.1 200 OK"
2025-08-01 16:47:38,429 - httpx - INFO - HTTP Request: GET https://www.frontiersin.org/journals/plant-science/articles/10.3389/fpls.2024.1357153/full "HTTP/1.1 200 OK"
2025-08-01 16:47:38,449 - httpx - INFO - HTTP Request: GET https://cordis.europa.eu/project/id/613781/reporting "HTTP/1.1 200 OK"
2025-08-01 16:47:39,266 - httpx - INFO - HTTP Request: GET http://localhost:11434/api/tags "HTTP/1.1 200 OK"
2025-08-01 16:47:39,267 - app.services.llm - INFO - Ollama → deepseek-r1:1.5b prompt:
Return exactly this JSON: {"foo": 42}
2025-08-01 16:47:39,368 - httpx - INFO - HTTP Request: GET http://localhost:11434/api/tags "HTTP/1.1 200 OK"
2025-08-01 16:47:39,368 - app.services.llm - INFO - Sending prompt to LLM:
Return {"x":1}
2025-08-01 16:47:39,368 - app.services.llm - INFO - Ollama → deepseek-r1:1.5b prompt:
Return {"x":1}
2025-08-01 16:47:40,126 - app.services.plant_service - INFO - Fetching plants from database...
2025-08-01 16:47:40,127 - app.services.plant_service - INFO - No plants found, returning an empty list.
2025-08-01 16:47:40,187 - app.services.plant_service - INFO - Fetching plants from database...
2025-08-01 16:47:40,187 - app.services.plant_service - INFO - Fetched 2 plants from the database
2025-08-01 16:47:40,482 - app.services.plant_service - INFO - Fetching plants from database...
2025-08-01 16:47:40,483 - app.services.plant_service - ERROR - Database query failed: db is down
2025-08-01 16:47:40,541 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.7ms
2025-08-01 16:47:40,541 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:47:40,619 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.4ms
2025-08-01 16:47:40,619 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:47:40,683 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.5ms
2025-08-01 16:47:40,684 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:47:40,749 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.7ms
2025-08-01 16:47:40,749 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:47:40,816 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 2.0ms
2025-08-01 16:47:40,817 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:47:40,884 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.5ms
2025-08-01 16:47:40,884 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:47:41,818 - app.main - WARNING - HTTPException Could not validate credentials on /api/v1/devices/dosing
2025-08-01 16:47:41,819 - app.main - INFO - POST /api/v1/devices/dosing • ip=127.0.0.1 • device_id=- • 401 • 1.0ms
2025-08-01 16:47:41,819 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/devices/dosing "HTTP/1.1 401 Unauthorized"
2025-08-01 16:47:41,882 - app.main - INFO - POST /admin/device/nonexistent/issue-token • ip=127.0.0.1 • device_id=- • 404 • 0.3ms
2025-08-01 16:47:41,882 - httpx - INFO - HTTP Request: POST http://testserver/admin/device/nonexistent/issue-token "HTTP/1.1 404 Not Found"
2025-08-01 16:52:59,631 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/saswatpandey/hydroleaf/env/lib/python3.12/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-01 16:52:59,897 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 327.1ms
2025-08-01 16:52:59,897 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:53:00,295 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 264.5ms
2025-08-01 16:53:00,296 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:53:00,626 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 248.0ms
2025-08-01 16:53:00,626 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:53:00,642 - app.main - WARNING - HTTPException Email already registered on /api/v1/auth/signup
2025-08-01 16:53:00,642 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 400 • 15.5ms
2025-08-01 16:53:00,643 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 400 Bad Request"
2025-08-01 16:53:00,721 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 0.9ms
2025-08-01 16:53:00,722 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:53:00,780 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.6ms
2025-08-01 16:53:00,781 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:53:00,833 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.2ms
2025-08-01 16:53:00,833 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:53:01,159 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 273.5ms
2025-08-01 16:53:01,159 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:53:01,394 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 200 • 234.4ms
2025-08-01 16:53:01,394 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 200 OK"
2025-08-01 16:53:01,725 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 252.7ms
2025-08-01 16:53:01,726 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:53:01,956 - app.main - WARNING - HTTPException Invalid credentials on /api/v1/auth/login
2025-08-01 16:53:01,956 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 401 • 230.0ms
2025-08-01 16:53:01,957 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-08-01 16:53:02,054 - app.main - WARNING - HTTPException Invalid credentials on /api/v1/auth/login
2025-08-01 16:53:02,054 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 401 • 11.2ms
2025-08-01 16:53:02,054 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 401 Unauthorized"
2025-08-01 16:53:02,111 - app.main - INFO - POST /api/v1/auth/login • ip=127.0.0.1 • device_id=- • 422 • 2.3ms
2025-08-01 16:53:02,112 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/login "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:53:02,426 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 201 • 262.8ms
2025-08-01 16:53:02,427 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 201 Created"
2025-08-01 16:53:02,895 - app.services.supply_chain_service - ERROR - No valid JSON block found in LLM response.
2025-08-01 16:53:03,334 - app.services.llm - INFO - Sending prompt to LLM:

2025-08-01 16:53:03,334 - app.services.llm - INFO - Ollama → deepseek-r1:1.5b prompt:

2025-08-01 16:53:04,546 - app.services.dose_manager - INFO - Cancellation response for device devX: {'cancelled': True}
2025-08-01 16:53:05,181 - app.services.llm - ERROR - No valid JSON block found in OpenAI response: no braces at all
2025-08-01 16:53:07,845 - httpx - INFO - HTTP Request: GET https://google.serper.dev/search?q=optimal+growth.+Focus+on+best+practices+in+Europe+for+Veggie+cultivation.&gl=in&hl=en&apiKey=eeaeee2729768c737ca5a6004968a9840677e523&num=5&full=true&output=detailed "HTTP/1.1 200 OK"
2025-08-01 16:53:08,177 - httpx - INFO - HTTP Request: GET https://www.researchgate.net/publication/260984593_Good_Agricultural_Practices_for_greenhouse_vegetable_crops_Principles_for_Mediterranean_climate_areas "HTTP/1.1 403 Forbidden"
2025-08-01 16:53:08,179 - app.services.serper - WARNING - Scrape forbidden (403) for https://www.researchgate.net/publication/260984593_Good_Agricultural_Practices_for_greenhouse_vegetable_crops_Principles_for_Mediterranean_climate_areas
2025-08-01 16:53:08,193 - httpx - INFO - HTTP Request: GET https://www.researchgate.net/publication/323363546_Strategies_for_optimal_fertiliser_management_of_vegetable_crops_in_Europe "HTTP/1.1 403 Forbidden"
2025-08-01 16:53:08,197 - app.services.serper - WARNING - Scrape forbidden (403) for https://www.researchgate.net/publication/323363546_Strategies_for_optimal_fertiliser_management_of_vegetable_crops_in_Europe
2025-08-01 16:53:08,758 - httpx - INFO - HTTP Request: GET https://www.fao.org/4/i3284e/i3284e.pdf "HTTP/1.1 200 OK"
2025-08-01 16:53:09,306 - httpx - INFO - HTTP Request: GET https://www.frontiersin.org/journals/plant-science/articles/10.3389/fpls.2024.1357153/full "HTTP/1.1 200 OK"
2025-08-01 16:53:09,338 - httpx - INFO - HTTP Request: GET https://www.agronomyjournals.com/article/view/2394/8-1-44 "HTTP/1.1 302 Moved Temporarily"
2025-08-01 16:53:09,338 - app.services.serper - WARNING - HTTP error scraping https://www.agronomyjournals.com/article/view/2394/8-1-44: Redirect response '302 Moved Temporarily' for url 'https://www.agronomyjournals.com/article/view/2394/8-1-44'
Redirect location: 'https://www.agronomyjournals.com/archives/2025/vol8issue1/PartD/8-1-44-621.pdf'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302
2025-08-01 16:53:10,076 - httpx - INFO - HTTP Request: GET http://localhost:11434/api/tags "HTTP/1.1 200 OK"
2025-08-01 16:53:10,076 - app.services.llm - INFO - Ollama → deepseek-r1:1.5b prompt:
Return exactly this JSON: {"foo": 42}
2025-08-01 16:53:10,167 - httpx - INFO - HTTP Request: GET http://localhost:11434/api/tags "HTTP/1.1 200 OK"
2025-08-01 16:53:10,168 - app.services.llm - INFO - Sending prompt to LLM:
Return {"x":1}
2025-08-01 16:53:10,168 - app.services.llm - INFO - Ollama → deepseek-r1:1.5b prompt:
Return {"x":1}
2025-08-01 16:53:10,815 - app.services.plant_service - INFO - Fetching plants from database...
2025-08-01 16:53:10,816 - app.services.plant_service - INFO - No plants found, returning an empty list.
2025-08-01 16:53:10,889 - app.services.plant_service - INFO - Fetching plants from database...
2025-08-01 16:53:10,890 - app.services.plant_service - INFO - Fetched 2 plants from the database
2025-08-01 16:53:11,168 - app.services.plant_service - INFO - Fetching plants from database...
2025-08-01 16:53:11,168 - app.services.plant_service - ERROR - Database query failed: db is down
2025-08-01 16:53:11,225 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 2.0ms
2025-08-01 16:53:11,226 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:53:11,302 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.2ms
2025-08-01 16:53:11,303 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:53:11,367 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.5ms
2025-08-01 16:53:11,367 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:53:11,430 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.4ms
2025-08-01 16:53:11,430 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:53:11,494 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.4ms
2025-08-01 16:53:11,494 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:53:11,561 - app.main - INFO - POST /api/v1/auth/signup • ip=127.0.0.1 • device_id=- • 422 • 1.5ms
2025-08-01 16:53:11,561 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/auth/signup "HTTP/1.1 422 Unprocessable Entity"
2025-08-01 16:53:12,494 - app.main - WARNING - HTTPException Could not validate credentials on /api/v1/devices/dosing
2025-08-01 16:53:12,494 - app.main - INFO - POST /api/v1/devices/dosing • ip=127.0.0.1 • device_id=- • 401 • 1.1ms
2025-08-01 16:53:12,495 - httpx - INFO - HTTP Request: POST http://testserver/api/v1/devices/dosing "HTTP/1.1 401 Unauthorized"
2025-08-01 16:53:12,596 - app.main - INFO - POST /admin/device/nonexistent/issue-token • ip=127.0.0.1 • device_id=- • 404 • 0.2ms
2025-08-01 16:53:12,596 - httpx - INFO - HTTP Request: POST http://testserver/admin/device/nonexistent/issue-token "HTTP/1.1 404 Not Found"
